{"ast":null,"code":"var _jsxFileName = \"/Users/yuradvornichenko/VSCode/omdbapiReact/src/components/movies/Movies.tsx\",\n  _s = $RefreshSig$();\nimport { useEffect, useRef, useState } from \"react\";\nimport { useAppSelector, useAppDispatch } from \"../../redux/hook\";\nimport InfiniteScroll from \"react-infinite-scroll-component\";\nimport { nanoid } from \"nanoid\";\nimport { operations, selectors, action } from \"../../redux/movies\";\nimport { MoviesItem, Loader, ScrollToTop } from \"../\";\nimport styles from \"./Movies.module.scss\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Movies = () => {\n  _s();\n  const moviesList = useAppSelector(selectors.getMovies);\n  const genres = useAppSelector(selectors.getGenres);\n  const dispatch = useAppDispatch();\n  const [page, setPage] = useState(1);\n  const pageLoaded = useRef(null);\n  useEffect(() => {\n    if (page === pageLoaded.current) {\n      return;\n    }\n    pageLoaded.current = page;\n    if (page === 1 && moviesList.length !== 0) {\n      dispatch(action.moviesAction([]));\n    }\n    if (genres.length === 0) {\n      dispatch(operations.fetchGenre());\n    }\n    dispatch(operations.fetchMovies(page));\n  }, [dispatch, genres, moviesList, page]);\n  const showNextMovies = () => {\n    setPage(page + 1);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: styles.container,\n    children: [/*#__PURE__*/_jsxDEV(InfiniteScroll, {\n      dataLength: moviesList.length,\n      next: showNextMovies,\n      hasMore: moviesList.length < 20 ? false : true,\n      scrollThreshold: 1,\n      loader: /*#__PURE__*/_jsxDEV(Loader, {\n        size: 70\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 17\n      }, this),\n      children: /*#__PURE__*/_jsxDEV(\"ul\", {\n        className: styles.list,\n        children: moviesList.map(item => /*#__PURE__*/_jsxDEV(MoviesItem, {\n          data: item,\n          genres: genres\n        }, `${item.id}_${nanoid()}`, false, {\n          fileName: _jsxFileName,\n          lineNumber: 51,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(ScrollToTop, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 41,\n    columnNumber: 5\n  }, this);\n};\n_s(Movies, \"1pVU3b2QkpxKqsTk11NwC6IvueE=\", false, function () {\n  return [useAppSelector, useAppSelector, useAppDispatch];\n});\n_c = Movies;\nexport default Movies;\nvar _c;\n$RefreshReg$(_c, \"Movies\");","map":{"version":3,"names":["useEffect","useRef","useState","useAppSelector","useAppDispatch","InfiniteScroll","nanoid","operations","selectors","action","MoviesItem","Loader","ScrollToTop","styles","jsxDEV","_jsxDEV","Movies","_s","moviesList","getMovies","genres","getGenres","dispatch","page","setPage","pageLoaded","current","length","moviesAction","fetchGenre","fetchMovies","showNextMovies","className","container","children","dataLength","next","hasMore","scrollThreshold","loader","size","fileName","_jsxFileName","lineNumber","columnNumber","list","map","item","data","id","_c","$RefreshReg$"],"sources":["/Users/yuradvornichenko/VSCode/omdbapiReact/src/components/movies/Movies.tsx"],"sourcesContent":["import { useEffect, useRef, useState } from \"react\";\nimport { useAppSelector, useAppDispatch } from \"../../redux/hook\";\nimport InfiniteScroll from \"react-infinite-scroll-component\";\nimport { nanoid } from \"nanoid\";\n\nimport { operations, selectors, action } from \"../../redux/movies\";\n\nimport { MoviesItem, Loader, ScrollToTop } from \"../\";\n\nimport styles from \"./Movies.module.scss\";\n\nconst Movies: React.FC = () => {\n  const moviesList = useAppSelector(selectors.getMovies);\n  const genres = useAppSelector(selectors.getGenres);\n  const dispatch = useAppDispatch();\n  const [page, setPage] = useState<number>(1);\n  const pageLoaded = useRef<number | null>(null);\n\n  useEffect(() => {\n    if (page === pageLoaded.current) {\n      return;\n    }\n    pageLoaded.current = page;\n\n    if (page === 1 && moviesList.length !== 0) {\n      dispatch(action.moviesAction([]));\n    }\n\n    if (genres.length === 0) {\n      dispatch(operations.fetchGenre());\n    }\n\n    dispatch(operations.fetchMovies(page));\n  }, [dispatch, genres, moviesList, page]);\n\n  const showNextMovies = () => {\n    setPage(page + 1);\n  };\n\n  return (\n    <div className={styles.container}>\n      <InfiniteScroll\n        dataLength={moviesList.length}\n        next={showNextMovies}\n        hasMore={moviesList.length < 20 ? false : true}\n        scrollThreshold={1}\n        loader={<Loader size={70} />}\n      >\n        <ul className={styles.list}>\n          {moviesList.map((item) => (\n            <MoviesItem\n              key={`${item.id}_${nanoid()}`}\n              data={item}\n              genres={genres}\n            />\n          ))}\n        </ul>\n      </InfiniteScroll>\n      <ScrollToTop />\n    </div>\n  );\n};\n\nexport default Movies;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}